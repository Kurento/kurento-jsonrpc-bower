!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.RpcBuilder=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
function Mapper(){var r={};this.forEach=function(e){for(var i in r){var o=r[i];for(var t in o)e(o[t])}},this.get=function(e,i){var o=r[i];return void 0==o?void 0:o[e]},this.remove=function(e,i){var o=r[i];if(void 0!=o){delete o[e];for(var t in o)return!1;delete r[i]}},this.set=function(e,i,o){if(void 0==e)return this.remove(i,o);var t=r[o];void 0==t&&(r[o]=t={}),t[i]=e}}Mapper.prototype.pop=function(r,e){var i=this.get(r,e);return void 0==i?void 0:(this.remove(r,e),i)},module.exports=Mapper;
//# sourceMappingURL=kurento-jsonrpc.map
},{}],2:[function(_dereq_,module,exports){
var JsonRpcClient=_dereq_("./jsonrpcclient");exports.JsonRpcClient=JsonRpcClient;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./jsonrpcclient":3}],3:[function(_dereq_,module,exports){
function JsonRpcClient(e){function n(){s=N,console.log("notReconnectIfNumLessThan = "+s)}function o(){if(l){var e=null;(0==N||N==s)&&(e={interval:PING_INTERVAL}),N++,r.send("ping",e,function(e){return function(o,t){o&&e>s&&(l=!1,n(),console.log("DSS did not respond to ping message "+e+". Reconnecting... "),O.reconnectWs())}}(N))}else console.log("Trying to send ping, but ping is not enabled")}function t(){C||(console.log("Starting ping (if configured)"),C=!0,void 0!=e.heartbeat&&(i=setInterval(o,e.heartbeat),o()))}var i,r=this,c=e.ws,s=-1,N=0,l=!0,C=!1,E=DISCONNECTED,a=c.onreconnecting,g=c.onreconnected,u=c.onconnected;e.rpc.pull=function(e,n){n.reply(null,"push")},c.onreconnecting=function(){return console.log("--------- ONRECONNECTING -----------"),E===RECONNECTING?void console.error("Websocket already in RECONNECTING state when receiving a new ONRECONNECTING message. Ignoring it"):(E=RECONNECTING,void(a&&a()))},c.onreconnected=function(){return console.log("--------- ONRECONNECTED -----------"),E===CONNECTED?void console.error("Websocket already in CONNECTED state when receiving a new ONRECONNECTED message. Ignoring it"):(E=CONNECTED,l=!0,n(),t(),void(g&&g()))},c.onconnected=function(){return console.log("--------- ONCONNECTED -----------"),E===CONNECTED?void console.error("Websocket already in CONNECTED state when receiving a new ONCONNECTED message. Ignoring it"):(E=CONNECTED,l=!0,t(),void(u&&u()))};var O=new WebSocketWithReconnection(c);console.log("Connecting websocket to URI: "+c.uri);var d={request_timeout:e.rpc.requestTimeout},R=new RpcBuilder(RpcBuilder.packers.JsonRPC,d,O,function(n){console.log("Received request: "+JSON.stringify(n));try{var o=e.rpc[n.method];void 0===o?console.error("Method "+n.method+" not registered in client"):o(n.params,n)}catch(t){console.error("Exception processing request: "+JSON.stringify(n)),console.error(t)}});this.send=function(e,n,o){"ping"!==e&&console.log("Request: method:"+e+" params:"+JSON.stringify(n));var t=Date.now();R.encode(e,n,function(i,r){if(i){try{console.error("ERROR:"+i.message+" in Request: method:"+e+" params:"+JSON.stringify(n)),i.data&&console.error("ERROR DATA:"+JSON.stringify(i.data))}catch(c){}i.requestTime=t}o&&(void 0!=r&&"pong"!==r.message&&console.log("Response: "+JSON.stringify(r)),o(i,r))})},this.close=function(){console.log("Closing jsonRpcClient explicitely by client"),void 0!=i&&clearInterval(i),C=!1,l=!1,e.sendCloseMessage?this.send("close_session",null,function(e,n){e&&console.error("Error sending close message: "+JSON.stringify(e)),O.close()}):O.close()},this.forceClose=function(e){O.forceClose(e)},this.reconnect=function(){O.reconnectWs()}}var RpcBuilder=_dereq_("../.."),WebSocketWithReconnection=_dereq_("./transports/webSocketWithReconnection");Date.now=Date.now||function(){return+new Date};var PING_INTERVAL=5e3,RECONNECTING="RECONNECTING",CONNECTED="CONNECTED",DISCONNECTED="DISCONNECTED",RECONNECTING="RECONNECTING",CONNECTED="CONNECTED",DISCONNECTED="DISCONNECTED";module.exports=JsonRpcClient;
//# sourceMappingURL=kurento-jsonrpc.map
},{"../..":6,"./transports/webSocketWithReconnection":5}],4:[function(_dereq_,module,exports){
var WebSocketWithReconnection=_dereq_("./webSocketWithReconnection");exports.WebSocketWithReconnection=WebSocketWithReconnection;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./webSocketWithReconnection":5}],5:[function(_dereq_,module,exports){
"use strict";function WebSocketWithReconnection(n){function o(n,o){try{console.log("WebSocket connected to "+o)}catch(e){console.error(e)}}function e(o,t){if(console.log("reconnectInNewUri"),1===t){if(u)return void console.warn("Trying to reconnect when reconnecting... Ignoring this reconnection.");u=!0,n.onreconnecting&&n.onreconnecting()}g?c(o,t,r):n.newWsUriOnReconnection?n.newWsUriOnReconnection(function(n,i){n?(console.log(n),setTimeout(function(){e(o,t+1)},RETRY_TIME_MS)):c(o,t,i)}):c(o,t,r)}function c(c,s,g){console.log("Trying to reconnect "+s+" times");var S;S=l?new SockJS(r):new WebSocket(r),S.onopen=function(){console.log("Reconnected in "+s+" retries..."),o(S,g),u=!1,t(),n.onreconnected()&&n.onreconnected(),S.onclose=f};var d=function(o){console.log("Reconnection error: ",o),s===c?n.ondisconnect&&n.ondisconnect():setTimeout(function(){e(c,s+1)},RETRY_TIME_MS)};S.onerror=d,i=S}var t,i,s=!1,r=n.uri,l=n.useSockJS,u=!1,g=!1;i=l?new SockJS(r):new WebSocket(r),i.onopen=function(){o(i,r),n.onconnected()},i.onerror=function(o){n.onconnected(o.data)};var f=function(){i.readyState===CLOSED?s?console.log("Connection Closed by user"):(console.log("Connection closed unexpectecly. Reconnecting..."),e(MAX_RETRIES,1)):console.log("Close callback from previous websocket. Ignoring it")};i.onclose=f,this.close=function(){s=!0,i.close()},this.forceClose=function(n){if(console.log("Testing: Force WebSocket close"),n){console.log("Testing: Change wsUri for "+n+" millis to simulate net failure");var o=r;r="wss://21.234.12.34.4:443/",g=!0,setTimeout(function(){console.log("Testing: Recover good wsUri "+o),r=o,g=!1},n)}i.close()},this.reconnectWs=function(){console.log("reconnectWs"),e(MAX_RETRIES,1,r)},this.send=function(n){i.send(n)},this.addEventListener=function(n,o){(t=function(){i.addEventListener(n,o)})()}}var WebSocket=_dereq_("ws"),SockJS=_dereq_("sockjs-client"),MAX_RETRIES=2e3,RETRY_TIME_MS=3e3,PING_INTERVAL=5e3,PING_MSG=JSON.stringify({method:"ping"}),CONNECTING=0,OPEN=1,CLOSING=2,CLOSED=3;module.exports=WebSocketWithReconnection;
//# sourceMappingURL=kurento-jsonrpc.map
},{"sockjs-client":19,"ws":74}],6:[function(_dereq_,module,exports){
function unifyResponseMethods(e){if(!e)return{};for(var t in e){var r=e[t];"string"==typeof r&&(e[t]={response:r})}return e}function unifyTransport(e){if(e){if(e instanceof Function)return{send:e};if(e.send instanceof Function)return e;if(e.postMessage instanceof Function)return e.send=e.postMessage,e;if(e.write instanceof Function)return e.send=e.write,e;if(void 0===e.onmessage&&!(e.pause instanceof Function))throw new SyntaxError("Transport is not a function nor a valid object")}}function RpcNotification(e,t){defineProperty_IE8?(this.method=e,this.params=t):(Object.defineProperty(this,"method",{value:e,enumerable:!0}),Object.defineProperty(this,"params",{value:t,enumerable:!0}))}function RpcBuilder(e,t,r,n){function i(e){f.decode(e.data||e)}function o(e,t,r){var n={message:e,timeout:setTimeout(function(){y.remove(t,r)},l)};y.set(n,t,r)}function s(e,t){var r=setTimeout(function(){T.remove(e,t)},v);T.set(r,e,t)}function a(t,r,n,i,s){RpcNotification.call(this,t,r),this.getTransport=function(){return s},this.setTransport=function(e){s=unifyTransport(e)},defineProperty_IE8||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)});var a=y.get(n,i);s||f.getTransport()||(defineProperty_IE8?this.duplicated=Boolean(a):Object.defineProperty(this,"duplicated",{value:Boolean(a)}));var c=p[t];this.pack=e.pack.bind(e,this,n),this.reply=function(t,r,s){if(t instanceof Function||t&&t.send instanceof Function){if(void 0!=r)throw new SyntaxError("There can't be parameters after callback");s=t,r=null,t=void 0}else if(r instanceof Function||r&&r.send instanceof Function){if(void 0!=s)throw new SyntaxError("There can't be parameters after callback");s=r,r=null}s=unifyTransport(s),a&&clearTimeout(a.timeout),void 0!=i&&(t&&(t.dest=i),r&&(r.dest=i));var p;if(t||void 0!=r){if(void 0!=f.peerID&&(t?t.from=f.peerID:r.from=f.peerID),c)if(void 0==c.error&&t)p={error:t};else{var u=t?c.error:c.response;p={method:u,params:t||r}}else p={error:t,result:r};p=e.pack(p,n)}else p=a?a.message:e.pack({result:null},n);return o(p,n,i),s=s||this.getTransport()||f.getTransport(),s?s.send(p):p}}function c(e){var t=E[e];if(t){delete E[e];var r=m.pop(t.id,t.dest);r&&(clearTimeout(r.timeout),s(t.id,t.dest))}}var f=this;if(!e)throw new SyntaxError("Packer is not defined");if(!e.pack||!e.unpack)throw new SyntaxError("Packer is invalid");var p=unifyResponseMethods(e.responseMethods);if(t instanceof Function){if(void 0!=r)throw new SyntaxError("There can't be parameters after onRequest");n=t,r=void 0,t=void 0}if(t&&t.send instanceof Function){if(r&&!(r instanceof Function))throw new SyntaxError("Only a function can be after transport");n=r,r=t,t=void 0}if(r instanceof Function){if(void 0!=n)throw new SyntaxError("There can't be parameters after onRequest");n=r,r=void 0}if(r&&r.send instanceof Function&&n&&!(n instanceof Function))throw new SyntaxError("Only a function can be after transport");t=t||{},EventEmitter.call(this),n&&this.on("request",n),defineProperty_IE8?this.peerID=t.peerID:Object.defineProperty(this,"peerID",{value:t.peerID});var u=t.max_retries||0;this.getTransport=function(){return r},this.setTransport=function(e){r&&(r.removeEventListener?r.removeEventListener("message",i):r.removeListener&&r.removeListener("data",i)),e&&(e.addEventListener?e.addEventListener("message",i):e.addListener&&e.addListener("data",i)),r=unifyTransport(e)},defineProperty_IE8||Object.defineProperty(this,"transport",{get:this.getTransport.bind(this),set:this.setTransport.bind(this)}),this.setTransport(r);var d=t.request_timeout||BASE_TIMEOUT,l=t.response_timeout||BASE_TIMEOUT,v=t.duplicates_timeout||BASE_TIMEOUT,h=0,m=new Mapper,y=new Mapper,T=new Mapper,E={};inherits(a,RpcNotification),this.cancel=function(e){if(e)return c(e);for(var e in E)c(e)},this.close=function(){var e=this.getTransport();e&&e.close&&e.close(),this.cancel(),T.forEach(clearTimeout),y.forEach(function(e){clearTimeout(e.timeout)})},this.encode=function(t,r,n,i,o){function s(e,t){f.cancel(v),o(e,t)}function a(e){return b.timeout=setTimeout(l,d*Math.pow(2,w++)),E[v]={id:y,dest:n},m.set(b,y,n),e=e||g||f.getTransport(),e?e.send(v):v}function c(e){e=unifyTransport(e),console.warn(w+" retry for request message:",v);var t=T.pop(y,n);return clearTimeout(t),a(e)}function l(){if(u>w)return c(i);var e=new Error("Request has timed out");e.request=v,e.retry=c,s(e)}if(r instanceof Function){if(void 0!=n)throw new SyntaxError("There can't be parameters after callback");o=r,i=void 0,n=void 0,r=void 0}else if(n instanceof Function){if(void 0!=i)throw new SyntaxError("There can't be parameters after callback");o=n,i=void 0,n=void 0}else if(i instanceof Function){if(void 0!=o)throw new SyntaxError("There can't be parameters after callback");o=i,i=void 0}void 0!=f.peerID&&(r=r||{},r.from=f.peerID),void 0!=n&&(r=r||{},r.dest=n);var v={method:t,params:r};if(o){var y=h++,w=0;v=e.pack(v,y);var b={message:v,callback:s,responseMethods:p[t]||{}},g=unifyTransport(i);return a(i)}return v=e.pack(v),i=i||this.getTransport(),i?i.send(v):v},this.decode=function(t,r){function n(){if(r=unifyTransport(r)||f.getTransport()){var e=y.get(p,v);if(e)return r.send(e.message)}var t=void 0!=p?p:u,n=new a(d,l,t,v,r);return f.emit("request",n)?void 0:n}function i(e,t,r){e.callback(t,r)}function o(e){console.warn("Response already processed",t),clearTimeout(e),s(u,v)}if(!t)throw new TypeError("Message is not defined");try{t=e.unpack(t)}catch(c){return console.log(c,t)}var p=t.id,u=t.ack,d=t.method,l=t.params||{},v=l.from,h=l.dest;if(void 0==f.peerID||v!=f.peerID){if(void 0==p&&void 0==u){var E=new RpcNotification(d,l);if(f.emit("request",E))return;return E}if(d){if(void 0==h||h==f.peerID){var w=m.get(u,v);if(w){var b=w.responseMethods;return d==b.error?i(w,l):d==b.response?i(w,null,l):n()}var g=T.get(u,v);if(g)return o(g)}return n()}var I=t.error,k=t.result;if(!(I&&I.dest&&I.dest!=f.peerID||k&&k.dest&&k.dest!=f.peerID)){var w=m.get(u,v);if(!w){var g=T.get(u,v);return g?o(g):console.warn("No callback was defined for this message",t)}i(w,I,k)}}}}var defineProperty_IE8=!1;if(Object.defineProperty)try{Object.defineProperty({},"x",{})}catch(e){defineProperty_IE8=!0}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},i=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,i.prototype=new n,i});var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),packers=_dereq_("./packers"),Mapper=_dereq_("./Mapper"),BASE_TIMEOUT=5e3;inherits(RpcBuilder,EventEmitter),RpcBuilder.RpcNotification=RpcNotification,module.exports=RpcBuilder;var clients=_dereq_("./clients"),transports=_dereq_("./clients/transports");RpcBuilder.clients=clients,RpcBuilder.clients.transports=transports,RpcBuilder.packers=packers;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./Mapper":1,"./clients":2,"./clients/transports":4,"./packers":9,"events":12,"inherits":13}],7:[function(_dereq_,module,exports){
function pack(r,e){var o={jsonrpc:"2.0"};if(r.method)o.method=r.method,r.params&&(o.params=r.params),void 0!=e&&(o.id=e);else if(void 0!=e){if(r.error){if(void 0!==r.result)throw new TypeError("Both result and error are defined");o.error=r.error}else{if(void 0===r.result)throw new TypeError("No result or error is defined");o.result=r.result}o.id=e}return JSON.stringify(o)}function unpack(r){var e=r;("string"==typeof r||r instanceof String)&&(e=JSON.parse(r));var o=e.jsonrpc;if("2.0"!=o)throw new TypeError("Invalid JsonRPC version '"+o+"': "+r);if(void 0==e.method){if(void 0==e.id)throw new TypeError("Invalid message: "+r);var i=void 0!==e.result,t=void 0!==e.error;if(i&&t)throw new TypeError("Both result and error are defined: "+r);if(!i&&!t)throw new TypeError("No result or error is defined: "+r);e.ack=e.id,delete e.id}return e}exports.pack=pack,exports.unpack=unpack;
//# sourceMappingURL=kurento-jsonrpc.map
},{}],8:[function(_dereq_,module,exports){
function pack(e){throw new TypeError("Not yet implemented")}function unpack(e){throw new TypeError("Not yet implemented")}exports.pack=pack,exports.unpack=unpack;
//# sourceMappingURL=kurento-jsonrpc.map
},{}],9:[function(_dereq_,module,exports){
var JsonRPC=_dereq_("./JsonRPC"),XmlRPC=_dereq_("./XmlRPC");exports.JsonRPC=JsonRPC,exports.XmlRPC=XmlRPC;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./JsonRPC":7,"./XmlRPC":8}],10:[function(_dereq_,module,exports){
function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var o=arguments,e=this.useColors;if(o[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+o[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),!e)return o;var r="color: "+this.color;o=[o[0],r,"color: inherit"].concat(Array.prototype.slice.call(o,1));var t=0,s=0;return o[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(t++,"%c"===o&&(s=t))}),o.splice(s,0,r),o}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(o){try{null==o?exports.storage.removeItem("debug"):exports.storage.debug=o}catch(e){}}function load(){var o;try{o=exports.storage.debug}catch(e){}return o}function localstorage(){try{return window.localStorage}catch(o){}}exports=module.exports=_dereq_("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(o){return JSON.stringify(o)},exports.enable(load());
//# sourceMappingURL=kurento-jsonrpc.map
},{"./debug":11}],11:[function(_dereq_,module,exports){
function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||console.log.bind(console);p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=_dereq_("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;
//# sourceMappingURL=kurento-jsonrpc.map
},{"ms":15}],12:[function(_dereq_,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
//# sourceMappingURL=kurento-jsonrpc.map
},{}],13:[function(_dereq_,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
//# sourceMappingURL=kurento-jsonrpc.map
},{}],14:[function(_dereq_,module,exports){
(function (global){
(function(){function e(t,n){function c(e){if(c[e]!==d)return c[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=c("json-stringify")&&c("json-parse");else{var r,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=n.stringify,s="function"==typeof l&&C;if(s){(r=function(){return 1}).toJSON=r;try{s="0"===l(0)&&"0"===l(new i)&&'""'==l(new a)&&l(v)===d&&l(d)===d&&l()===d&&"1"===l(r)&&"[1]"==l([r])&&"[null]"==l([d])&&"null"==l(null)&&"[null,null,null]"==l([d,v,null])&&l({a:[r,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===l(null,r)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new f(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new f(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new f(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new f(-1))}catch(u){s=!1}}t=s}if("json-parse"==e){var h=n.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){r=h(o);var p=5==r.a.length&&1===r.a[0];if(p){try{p=!h('"	"')}catch(u){}if(p)try{p=1!==h("01")}catch(u){}if(p)try{p=1!==h("1.")}catch(u){}}}}catch(u){p=!1}t=p}}return c[e]=!!t}t||(t=o.Object()),n||(n=o.Object());var i=t.Number||o.Number,a=t.String||o.String,l=t.Object||o.Object,f=t.Date||o.Date,s=t.SyntaxError||o.SyntaxError,u=t.TypeError||o.TypeError,h=t.Math||o.Math,p=t.JSON||o.JSON;"object"==typeof p&&p&&(n.stringify=p.stringify,n.parse=p.parse);var g,y,d,b=l.prototype,v=b.toString,C=new f(-0xc782b5b800cec);try{C=-109252==C.getUTCFullYear()&&0===C.getUTCMonth()&&1===C.getUTCDate()&&10==C.getUTCHours()&&37==C.getUTCMinutes()&&6==C.getUTCSeconds()&&708==C.getUTCMilliseconds()}catch(j){}if(!c("json")){var S="[object Function]",O="[object Date]",w="[object Number]",T="[object String]",A="[object Array]",_="[object Boolean]",N=c("bug-string-char-index");if(!C)var U=h.floor,J=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return J[t]+365*(e-1970)+U((e-1969+(t=+(t>1)))/4)-U((e-1901+t)/100)+U((e-1601+t)/400)};if((g=b.hasOwnProperty)||(g=function(e){var t,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=v?g=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=r.constructor,g=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),r=null,g.call(this,e)}),y=function(e,t){var n,o,c,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(c in o)g.call(o,c)&&i++;return n=o=null,i?y=2==i?function(e,t){var r,n={},o=v.call(e)==S;for(r in e)o&&"prototype"==r||g.call(n,r)||!(n[r]=1)||!g.call(e,r)||t(r)}:function(e,t){var r,n,o=v.call(e)==S;for(r in e)o&&"prototype"==r||!g.call(e,r)||(n="constructor"===r)||t(r);(n||g.call(e,r="constructor"))&&t(r)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(e,t){var n,c,i=v.call(e)==S,a=!i&&"function"!=typeof e.constructor&&r[typeof e.hasOwnProperty]&&e.hasOwnProperty||g;for(n in e)i&&"prototype"==n||!a.call(e,n)||t(n);for(c=o.length;n=o[--c];a.call(e,n)&&t(n));}),y(e,t)},!c("json-stringify")){var m={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},M="000000",k=function(e,t){return(M+(t||0)).slice(-e)},D="\\u00",E=function(e){for(var t='"',r=0,n=e.length,o=!N||n>10,c=o&&(N?e.split(""):e);n>r;r++){var i=e.charCodeAt(r);switch(i){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=m[i];break;default:if(32>i){t+=D+k(2,i.toString(16));break}t+=o?c[r]:e.charAt(r)}}return t+'"'},P=function(e,t,r,n,o,c,i){var a,l,f,s,h,p,b,C,j,S,N,J,m,M,D,Z;try{a=t[e]}catch(F){}if("object"==typeof a&&a)if(l=v.call(a),l!=O||g.call(a,"toJSON"))"function"==typeof a.toJSON&&(l!=w&&l!=T&&l!=A||g.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&1/0>a){if(x){for(h=U(a/864e5),f=U(h/365.2425)+1970-1;x(f+1,0)<=h;f++);for(s=U((h-x(f,0))/30.42);x(f,s+1)<=h;s++);h=1+h-x(f,s),p=(a%864e5+864e5)%864e5,b=U(p/36e5)%24,C=U(p/6e4)%60,j=U(p/1e3)%60,S=p%1e3}else f=a.getUTCFullYear(),s=a.getUTCMonth(),h=a.getUTCDate(),b=a.getUTCHours(),C=a.getUTCMinutes(),j=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(0>=f||f>=1e4?(0>f?"-":"+")+k(6,0>f?-f:f):k(4,f))+"-"+k(2,s+1)+"-"+k(2,h)+"T"+k(2,b)+":"+k(2,C)+":"+k(2,j)+"."+k(3,S)+"Z"}else a=null;if(r&&(a=r.call(t,e,a)),null===a)return"null";if(l=v.call(a),l==_)return""+a;if(l==w)return a>-1/0&&1/0>a?""+a:"null";if(l==T)return E(""+a);if("object"==typeof a){for(M=i.length;M--;)if(i[M]===a)throw u();if(i.push(a),N=[],D=c,c+=o,l==A){for(m=0,M=a.length;M>m;m++)J=P(m,a,r,n,o,c,i),N.push(J===d?"null":J);Z=N.length?o?"[\n"+c+N.join(",\n"+c)+"\n"+D+"]":"["+N.join(",")+"]":"[]"}else y(n||a,function(e){var t=P(e,a,r,n,o,c,i);t!==d&&N.push(E(e)+":"+(o?" ":"")+t)}),Z=N.length?o?"{\n"+c+N.join(",\n"+c)+"\n"+D+"}":"{"+N.join(",")+"}":"{}";return i.pop(),Z}};n.stringify=function(e,t,n){var o,c,i,a;if(r[typeof t]&&t)if((a=v.call(t))==S)c=t;else if(a==A){i={};for(var l,f=0,s=t.length;s>f;l=t[f++],a=v.call(l),(a==T||a==w)&&(i[l]=1));}if(n)if((a=v.call(n))==w){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else a==T&&(o=n.length<=10?n:n.slice(0,10));return P("",(l={},l[""]=e,l),c,i,o,"",[])}}if(!c("json-parse")){var Z,F,$=a.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw Z=F=null,s()},Y=function(){for(var e,t,r,n,o,c=F,i=c.length;i>Z;)switch(o=c.charCodeAt(Z)){case 9:case 10:case 13:case 32:Z++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=N?c.charAt(Z):c[Z],Z++,e;case 34:for(e="@",Z++;i>Z;)if(o=c.charCodeAt(Z),32>o)I();else if(92==o)switch(o=c.charCodeAt(++Z)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=H[o],Z++;break;case 117:for(t=++Z,r=Z+4;r>Z;Z++)o=c.charCodeAt(Z),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||I();e+=$("0x"+c.slice(t,Z));break;default:I()}else{if(34==o)break;for(o=c.charCodeAt(Z),t=Z;o>=32&&92!=o&&34!=o;)o=c.charCodeAt(++Z);e+=c.slice(t,Z)}if(34==c.charCodeAt(Z))return Z++,e;I();default:if(t=Z,45==o&&(n=!0,o=c.charCodeAt(++Z)),o>=48&&57>=o){for(48==o&&(o=c.charCodeAt(Z+1),o>=48&&57>=o)&&I(),n=!1;i>Z&&(o=c.charCodeAt(Z),o>=48&&57>=o);Z++);if(46==c.charCodeAt(Z)){for(r=++Z;i>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==Z&&I(),Z=r}if(o=c.charCodeAt(Z),101==o||69==o){for(o=c.charCodeAt(++Z),(43==o||45==o)&&Z++,r=Z;i>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==Z&&I(),Z=r}return+c.slice(t,Z)}if(n&&I(),"true"==c.slice(Z,Z+4))return Z+=4,!0;if("false"==c.slice(Z,Z+5))return Z+=5,!1;if("null"==c.slice(Z,Z+4))return Z+=4,null;I()}return"$"},B=function(e){var t,r;if("$"==e&&I(),"string"==typeof e){if("@"==(N?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=Y(),"]"!=e;r||(r=!0))r&&(","==e?(e=Y(),"]"==e&&I()):I()),","==e&&I(),t.push(B(e));return t}if("{"==e){for(t={};e=Y(),"}"!=e;r||(r=!0))r&&(","==e?(e=Y(),"}"==e&&I()):I()),(","==e||"string"!=typeof e||"@"!=(N?e.charAt(0):e[0])||":"!=Y())&&I(),t[e.slice(1)]=B(Y());return t}I()}return e},L=function(e,t,r){var n=q(e,t,r);n===d?delete e[t]:e[t]=n},q=function(e,t,r){var n,o=e[t];if("object"==typeof o&&o)if(v.call(o)==A)for(n=o.length;n--;)L(o,n,r);else y(o,function(e){L(o,e,r)});return r.call(e,t,o)};n.parse=function(e,t){var r,n;return Z=0,F=""+e,r=B(Y()),"$"!=Y()&&I(),Z=F=null,t&&v.call(t)==S?q((n={},n[""]=r,n),"",t):r}}}return n.runInContext=e,n}var t="function"==typeof define&&define.amd,r={"function":!0,object:!0},n=r[typeof exports]&&exports&&!exports.nodeType&&exports,o=r[typeof window]&&window||this,c=n&&r[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(o=c),n&&!t)e(o,n);else{var i=o.JSON,a=o.JSON3,l=!1,f=e(o,o.JSON3={noConflict:function(){return l||(l=!0,o.JSON=i,o.JSON3=a,i=a=null),f}});o.JSON={parse:f.parse,stringify:f.stringify}}t&&define(function(){return f})}).call(this);
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],15:[function(_dereq_,module,exports){
function parse(e){if(e=""+e,!(e.length>1e4)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(a){var r=parseFloat(a[1]),c=(a[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,a){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+a:Math.ceil(s/e)+" "+a+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e["long"]?long(s):short(s)};
//# sourceMappingURL=kurento-jsonrpc.map
},{}],16:[function(_dereq_,module,exports){
function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(o){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(o){throw new Error("process.chdir is not supported")};
//# sourceMappingURL=kurento-jsonrpc.map
},{}],17:[function(_dereq_,module,exports){
"use strict";function querystring(e){for(var r,n=/([^=?&]+)=([^&]*)/g,t={};r=n.exec(e);t[decodeURIComponent(r[1])]=decodeURIComponent(r[2]));return t}function querystringify(e,r){r=r||"";var n=[];"string"!=typeof r&&(r="?");for(var t in e)has.call(e,t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.length?r+n.join("&"):""}var has=Object.prototype.hasOwnProperty;exports.stringify=querystringify,exports.parse=querystring;
//# sourceMappingURL=kurento-jsonrpc.map
},{}],18:[function(_dereq_,module,exports){
"use strict";module.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e};
//# sourceMappingURL=kurento-jsonrpc.map
},{}],19:[function(_dereq_,module,exports){
(function (global){
"use strict";var transportList=_dereq_("./transport-list");module.exports=_dereq_("./main")(transportList),"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1);
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./main":32,"./transport-list":34}],20:[function(_dereq_,module,exports){
"use strict";function CloseEvent(){Event.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var inherits=_dereq_("inherits"),Event=_dereq_("./event");inherits(CloseEvent,Event),module.exports=CloseEvent;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./event":22,"inherits":13}],21:[function(_dereq_,module,exports){
"use strict";function EventEmitter(){EventTarget.call(this)}var inherits=_dereq_("inherits"),EventTarget=_dereq_("./eventtarget");inherits(EventEmitter,EventTarget),EventEmitter.prototype.removeAllListeners=function(t){t?delete this._listeners[t]:this._listeners={}},EventEmitter.prototype.once=function(t,e){function r(){n.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}var n=this,i=!1;this.on(t,r)},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e)for(var r=Array.prototype.slice.call(arguments,1),n=0;n<e.length;n++)e[n].apply(this,r)},EventEmitter.prototype.on=EventEmitter.prototype.addListener=EventTarget.prototype.addEventListener,EventEmitter.prototype.removeListener=EventTarget.prototype.removeEventListener,module.exports.EventEmitter=EventEmitter;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./eventtarget":23,"inherits":13}],22:[function(_dereq_,module,exports){
"use strict";function Event(t){this.type=t}Event.prototype.initEvent=function(t,e,n){return this.type=t,this.bubbles=e,this.cancelable=n,this.timeStamp=+new Date,this},Event.prototype.stopPropagation=function(){},Event.prototype.preventDefault=function(){},Event.CAPTURING_PHASE=1,Event.AT_TARGET=2,Event.BUBBLING_PHASE=3,module.exports=Event;
//# sourceMappingURL=kurento-jsonrpc.map
},{}],23:[function(_dereq_,module,exports){
"use strict";function EventTarget(){this._listeners={}}EventTarget.prototype.addEventListener=function(t,e){t in this._listeners||(this._listeners[t]=[]);var s=this._listeners[t];-1===s.indexOf(e)&&(s=s.concat([e])),this._listeners[t]=s},EventTarget.prototype.removeEventListener=function(t,e){var s=this._listeners[t];if(s){var i=s.indexOf(e);return-1!==i?void(s.length>1?this._listeners[t]=s.slice(0,i).concat(s.slice(i+1)):delete this._listeners[t]):void 0}},EventTarget.prototype.dispatchEvent=function(t){var e=t.type,s=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,s),e in this._listeners)for(var i=this._listeners[e],n=0;n<i.length;n++)i[n].apply(this,s)},module.exports=EventTarget;
//# sourceMappingURL=kurento-jsonrpc.map
},{}],24:[function(_dereq_,module,exports){
"use strict";function TransportMessageEvent(e){Event.call(this),this.initEvent("message",!1,!1),this.data=e}var inherits=_dereq_("inherits"),Event=_dereq_("./event");inherits(TransportMessageEvent,Event),module.exports=TransportMessageEvent;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./event":22,"inherits":13}],25:[function(_dereq_,module,exports){
"use strict";function FacadeJS(t){this._transport=t,t.on("message",this._transportMessage.bind(this)),t.on("close",this._transportClose.bind(this))}var JSON3=_dereq_("json3"),iframeUtils=_dereq_("./utils/iframe");FacadeJS.prototype._transportClose=function(t,s){iframeUtils.postMessage("c",JSON3.stringify([t,s]))},FacadeJS.prototype._transportMessage=function(t){iframeUtils.postMessage("t",t)},FacadeJS.prototype._send=function(t){this._transport.send(t)},FacadeJS.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},module.exports=FacadeJS;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./utils/iframe":65,"json3":14}],26:[function(_dereq_,module,exports){
(function (process){
"use strict";var urlUtils=_dereq_("./utils/url"),eventUtils=_dereq_("./utils/event"),JSON3=_dereq_("json3"),FacadeJS=_dereq_("./facade"),InfoIframeReceiver=_dereq_("./info-iframe-receiver"),iframeUtils=_dereq_("./utils/iframe"),loc=_dereq_("./location"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:iframe-bootstrap")),module.exports=function(e,r){var a={};r.forEach(function(e){e.facadeTransport&&(a[e.facadeTransport.transportName]=e.facadeTransport)}),a[InfoIframeReceiver.transportName]=InfoIframeReceiver;var i;e.bootstrap_iframe=function(){var r;iframeUtils.currentWindowId=loc.hash.slice(1);var t=function(t){if(t.source===parent&&("undefined"==typeof i&&(i=t.origin),t.origin===i)){var n;try{n=JSON3.parse(t.data)}catch(o){return void debug("bad json",t.data)}if(n.windowId===iframeUtils.currentWindowId)switch(n.type){case"s":var s;try{s=JSON3.parse(n.data)}catch(o){debug("bad json",n.data);break}var c=s[0],f=s[1],u=s[2],d=s[3];if(debug(c,f,u,d),c!==e.version)throw new Error('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+e.version+'".');if(!urlUtils.isOriginEqual(u,loc.href)||!urlUtils.isOriginEqual(d,loc.href))throw new Error("Can't connect to different domain from within an iframe. ("+loc.href+", "+u+", "+d+")");r=new FacadeJS(new a[f](u,d));break;case"m":r._send(n.data);break;case"c":r&&r._close(),r=null}}};eventUtils.attachEvent("message",t),iframeUtils.postMessage("s")}};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"./facade":25,"./info-iframe-receiver":28,"./location":31,"./utils/event":64,"./utils/iframe":65,"./utils/url":70,"debug":10,"g5I+bs":16,"json3":14}],27:[function(_dereq_,module,exports){
(function (process){
"use strict";function InfoAjax(e,t){EventEmitter.call(this);var i=this,n=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var s,r;if(200===e){if(r=+new Date-n,t)try{s=JSON3.parse(t)}catch(o){debug("bad json",t)}objectUtils.isObject(s)||(s={})}i.emit("finish",s,r),i.removeAllListeners()})}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),JSON3=_dereq_("json3"),objectUtils=_dereq_("./utils/object"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:info-ajax")),inherits(InfoAjax,EventEmitter),InfoAjax.prototype.close=function(){this.removeAllListeners(),this.xo.close()},module.exports=InfoAjax;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"./utils/object":67,"debug":10,"events":21,"g5I+bs":16,"inherits":13,"json3":14}],28:[function(_dereq_,module,exports){
"use strict";function InfoReceiverIframe(e){var r=this;EventEmitter.call(this),this.ir=new InfoAjax(e,XHRLocalObject),this.ir.once("finish",function(e,i){r.ir=null,r.emit("message",JSON3.stringify([e,i]))})}var inherits=_dereq_("inherits"),EventEmitter=_dereq_("events").EventEmitter,JSON3=_dereq_("json3"),XHRLocalObject=_dereq_("./transport/sender/xhr-local"),InfoAjax=_dereq_("./info-ajax");inherits(InfoReceiverIframe,EventEmitter),InfoReceiverIframe.transportName="iframe-info-receiver",InfoReceiverIframe.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},module.exports=InfoReceiverIframe;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./info-ajax":27,"./transport/sender/xhr-local":55,"events":21,"inherits":13,"json3":14}],29:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function InfoIframe(e,r){var i=this;EventEmitter.call(this);var t=function(){var t=i.ifr=new IframeTransport(InfoReceiverIframe.transportName,r,e);t.once("message",function(e){if(e){var r;try{r=JSON3.parse(e)}catch(t){return debug("bad json",e),i.emit("finish"),void i.close()}var n=r[0],o=r[1];i.emit("finish",n,o)}i.close()}),t.once("close",function(){i.emit("finish"),i.close()})};global.document.body?t():utils.attachEvent("load",t)}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),JSON3=_dereq_("json3"),utils=_dereq_("./utils/event"),IframeTransport=_dereq_("./transport/iframe"),InfoReceiverIframe=_dereq_("./info-iframe-receiver"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:info-iframe")),inherits(InfoIframe,EventEmitter),InfoIframe.enabled=function(){return IframeTransport.enabled()},InfoIframe.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},module.exports=InfoIframe;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./info-iframe-receiver":28,"./transport/iframe":40,"./utils/event":64,"debug":10,"events":21,"g5I+bs":16,"inherits":13,"json3":14}],30:[function(_dereq_,module,exports){
(function (process){
"use strict";function InfoReceiver(e,i){debug(e);var r=this;EventEmitter.call(this),setTimeout(function(){r.doXhr(e,i)},0)}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),urlUtils=_dereq_("./utils/url"),XDR=_dereq_("./transport/sender/xdr"),XHRCors=_dereq_("./transport/sender/xhr-cors"),XHRLocal=_dereq_("./transport/sender/xhr-local"),XHRFake=_dereq_("./transport/sender/xhr-fake"),InfoIframe=_dereq_("./info-iframe"),InfoAjax=_dereq_("./info-ajax"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:info-receiver")),inherits(InfoReceiver,EventEmitter),InfoReceiver._getReceiver=function(e,i,r){return r.sameOrigin?new InfoAjax(i,XHRLocal):XHRCors.enabled?new InfoAjax(i,XHRCors):XDR.enabled&&r.sameScheme?new InfoAjax(i,XDR):InfoIframe.enabled()?new InfoIframe(e,i):new InfoAjax(i,XHRFake)},InfoReceiver.prototype.doXhr=function(e,i){var r=this,t=urlUtils.addPath(e,"/info");debug("doXhr",t),this.xo=InfoReceiver._getReceiver(e,t,i),this.timeoutRef=setTimeout(function(){debug("timeout"),r._cleanup(!1),r.emit("finish")},InfoReceiver.timeout),this.xo.once("finish",function(e,i){debug("finish",e,i),r._cleanup(!0),r.emit("finish",e,i)})},InfoReceiver.prototype._cleanup=function(e){debug("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},InfoReceiver.prototype.close=function(){debug("close"),this.removeAllListeners(),this._cleanup(!1)},InfoReceiver.timeout=8e3,module.exports=InfoReceiver;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"./info-ajax":27,"./info-iframe":29,"./transport/sender/xdr":52,"./transport/sender/xhr-cors":53,"./transport/sender/xhr-fake":54,"./transport/sender/xhr-local":55,"./utils/url":70,"debug":10,"events":21,"g5I+bs":16,"inherits":13}],31:[function(_dereq_,module,exports){
(function (global){
"use strict";module.exports=global.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],32:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function SockJS(t,e,r){if(!(this instanceof SockJS))return new SockJS(t,e,r);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");EventTarget.call(this),this.readyState=SockJS.CONNECTING,this.extensions="",this.protocol="",r=r||{},r.protocols_whitelist&&log.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=r.transports;var s=r.sessionId||8;if("function"==typeof s)this._generateSessionId=s;else{if("number"!=typeof s)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return random.string(s)}}this._server=r.server||random.numberString(1e3);var o=new URL(t);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+t+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var n="https:"===o.protocol;if("https"===loc.protocol&&!n)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var i=e.sort();i.forEach(function(t,e){if(!t)throw new SyntaxError("The protocols entry '"+t+"' is invalid.");if(e<i.length-1&&t===i[e+1])throw new SyntaxError("The protocols entry '"+t+"' is duplicated.")});var a=urlUtils.getOrigin(loc.href);this._origin=a?a.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,debug("using url",this.url),this._urlInfo={nullOrigin:!browser.hasDomain(),sameOrigin:urlUtils.isOriginEqual(this.url,loc.href),sameScheme:urlUtils.isSchemeEqual(this.url,loc.href)},this._ir=new InfoReceiver(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function userSetCode(t){return 1e3===t||t>=3e3&&4999>=t}_dereq_("./shims");var URL=_dereq_("url-parse"),inherits=_dereq_("inherits"),JSON3=_dereq_("json3"),random=_dereq_("./utils/random"),escape=_dereq_("./utils/escape"),urlUtils=_dereq_("./utils/url"),eventUtils=_dereq_("./utils/event"),transport=_dereq_("./utils/transport"),objectUtils=_dereq_("./utils/object"),browser=_dereq_("./utils/browser"),log=_dereq_("./utils/log"),Event=_dereq_("./event/event"),EventTarget=_dereq_("./event/eventtarget"),loc=_dereq_("./location"),CloseEvent=_dereq_("./event/close"),TransportMessageEvent=_dereq_("./event/trans-message"),InfoReceiver=_dereq_("./info-receiver"),debug=function(){};"production"!==process.env.NODE_ENV&&(global.dbg=_dereq_("debug"),debug=global.dbg("sockjs-client:main"));var transports;inherits(SockJS,EventTarget),SockJS.prototype.close=function(t,e){if(t&&!userSetCode(t))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==SockJS.CLOSING&&this.readyState!==SockJS.CLOSED){var r=!0;this._close(t||1e3,e||"Normal closure",r)}},SockJS.prototype.send=function(t){if("string"!=typeof t&&(t=""+t),this.readyState===SockJS.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===SockJS.OPEN&&this._transport.send(escape.quote(t))},SockJS.version=_dereq_("./version"),SockJS.CONNECTING=0,SockJS.OPEN=1,SockJS.CLOSING=2,SockJS.CLOSED=3,SockJS.prototype._receiveInfo=function(t,e){if(debug("_receiveInfo",e),this._ir=null,!t)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(e),this._transUrl=t.base_url?t.base_url:this.url,t=objectUtils.extend(t,this._urlInfo),debug("info",t);var r=transports.filterToEnabled(this._transportsWhitelist,t);this._transports=r.main,debug(this._transports.length+" enabled transports"),this._connect()},SockJS.prototype._connect=function(){for(var t=this._transports.shift();t;t=this._transports.shift()){if(debug("attempt",t.transportName),t.needBody&&(!global.document.body||"undefined"!=typeof global.document.readyState&&"complete"!==global.document.readyState&&"interactive"!==global.document.readyState))return debug("waiting for body"),this._transports.unshift(t),void eventUtils.attachEvent("load",this._connect.bind(this));var e=this._rto*t.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e),debug("using timeout",e);var r=urlUtils.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId());debug("transport url",r);var s=new t(r,this._transUrl);return s.on("message",this._transportMessage.bind(this)),s.once("close",this._transportClose.bind(this)),s.transportName=t.transportName,void(this._transport=s)}this._close(2e3,"All transports failed",!1)},SockJS.prototype._transportTimeout=function(){debug("_transportTimeout"),this.readyState===SockJS.CONNECTING&&this._transportClose(2007,"Transport timed out")},SockJS.prototype._transportMessage=function(t){debug("_transportMessage",t);var e,r=this,s=t.slice(0,1),o=t.slice(1);switch(s){case"o":return void this._open();case"h":return this.dispatchEvent(new Event("heartbeat")),void debug("heartbeat",this.transport)}if(o)try{e=JSON3.parse(o)}catch(n){debug("bad json",o)}if("undefined"==typeof e)return void debug("empty payload",o);switch(s){case"a":Array.isArray(e)&&e.forEach(function(t){debug("message",r.transport,t),r.dispatchEvent(new TransportMessageEvent(t))});break;case"m":debug("message",this.transport,e),this.dispatchEvent(new TransportMessageEvent(e));break;case"c":Array.isArray(e)&&2===e.length&&this._close(e[0],e[1],!0)}},SockJS.prototype._transportClose=function(t,e){return debug("_transportClose",this.transport,t,e),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),userSetCode(t)||2e3===t||this.readyState!==SockJS.CONNECTING?void this._close(t,e):void this._connect()},SockJS.prototype._open=function(){debug("_open",this._transport.transportName,this.readyState),this.readyState===SockJS.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=SockJS.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new Event("open")),debug("connected",this.transport)):this._close(1006,"Server lost session")},SockJS.prototype._close=function(t,e,r){debug("_close",this.transport,t,e,r,this.readyState);var s=!1;if(this._ir&&(s=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===SockJS.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=SockJS.CLOSING,setTimeout(function(){this.readyState=SockJS.CLOSED,s&&this.dispatchEvent(new Event("error"));var o=new CloseEvent("close");o.wasClean=r||!1,o.code=t||1e3,o.reason=e,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null,debug("disconnected")}.bind(this),0)},SockJS.prototype.countRTO=function(t){return t>100?4*t:300+t},module.exports=function(t){return transports=transport(t),_dereq_("./iframe-bootstrap")(SockJS,t),SockJS};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./event/close":20,"./event/event":22,"./event/eventtarget":23,"./event/trans-message":24,"./iframe-bootstrap":26,"./info-receiver":30,"./location":31,"./shims":33,"./utils/browser":62,"./utils/escape":63,"./utils/event":64,"./utils/log":66,"./utils/object":67,"./utils/random":68,"./utils/transport":69,"./utils/url":70,"./version":71,"debug":10,"g5I+bs":16,"inherits":13,"json3":14,"url-parse":72}],33:[function(_dereq_,module,exports){
"use strict";function toInteger(t){var r=+t;return r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))),r}function ToUint32(t){return t>>>0}function Empty(){}var ArrayPrototype=Array.prototype,ObjectPrototype=Object.prototype,FunctionPrototype=Function.prototype,StringPrototype=String.prototype,array_slice=ArrayPrototype.slice,_toString=ObjectPrototype.toString,isFunction=function(t){return"[object Function]"===ObjectPrototype.toString.call(t)},isArray=function(t){return"[object Array]"===_toString.call(t)},isString=function(t){return"[object String]"===_toString.call(t)},supportsDescriptors=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}(),defineProperty;defineProperty=supportsDescriptors?function(t,r,e,n){!n&&r in t||Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:!0,value:e})}:function(t,r,e,n){!n&&r in t||(t[r]=e)};var defineProperties=function(t,r,e){for(var n in r)ObjectPrototype.hasOwnProperty.call(r,n)&&defineProperty(t,n,r[n],e)},toObject=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)};defineProperties(FunctionPrototype,{bind:function(t){var r=this;if(!isFunction(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var e=array_slice.call(arguments,1),n=function(){if(this instanceof p){var n=r.apply(this,e.concat(array_slice.call(arguments)));return Object(n)===n?n:this}return r.apply(t,e.concat(array_slice.call(arguments)))},i=Math.max(0,r.length-e.length),o=[],s=0;i>s;s++)o.push("$"+s);var p=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(n);return r.prototype&&(Empty.prototype=r.prototype,p.prototype=new Empty,Empty.prototype=null),p}}),defineProperties(Array,{isArray:isArray});var boxedString=Object("a"),splitString="a"!==boxedString[0]||!(0 in boxedString),properlyBoxesContext=function(t){var r=!0,e=!0;return t&&(t.call("foo",function(t,e,n){"object"!=typeof n&&(r=!1)}),t.call([1],function(){e="string"==typeof this},"x")),!!t&&r&&e};defineProperties(ArrayPrototype,{forEach:function(t){var r=toObject(this),e=splitString&&isString(this)?this.split(""):r,n=arguments[1],i=-1,o=e.length>>>0;if(!isFunction(t))throw new TypeError;for(;++i<o;)i in e&&t.call(n,e[i],i,r)}},!properlyBoxesContext(ArrayPrototype.forEach));var hasFirefox2IndexOfBug=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);defineProperties(ArrayPrototype,{indexOf:function(t){var r=splitString&&isString(this)?this.split(""):toObject(this),e=r.length>>>0;if(!e)return-1;var n=0;for(arguments.length>1&&(n=toInteger(arguments[1])),n=n>=0?n:Math.max(0,e+n);e>n;n++)if(n in r&&r[n]===t)return n;return-1}},hasFirefox2IndexOfBug);var string_split=StringPrototype.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];StringPrototype.split=function(r,e){var n=this;if(void 0===r&&0===e)return[];if("[object RegExp]"!==_toString.call(r))return string_split.call(this,r,e);var i,o,s,p,a=[],c=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),l=0;for(r=new RegExp(r.source,c+"g"),n+="",t||(i=new RegExp("^"+r.source+"$(?!\\s)",c)),e=void 0===e?-1>>>0:ToUint32(e);(o=r.exec(n))&&(s=o.index+o[0].length,!(s>l&&(a.push(n.slice(l,o.index)),!t&&o.length>1&&o[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<n.length&&ArrayPrototype.push.apply(a,o.slice(1)),p=o[0].length,l=s,a.length>=e)));)r.lastIndex===o.index&&r.lastIndex++;return l===n.length?(p||!r.test(""))&&a.push(""):a.push(n.slice(l)),a.length>e?a.slice(0,e):a}}():"0".split(void 0,0).length&&(StringPrototype.split=function(t,r){return void 0===t&&0===r?[]:string_split.call(this,t,r)});var ws="	\n\f\r \u2028\u2029\ufeff",zeroWidth="",wsRegexChars="["+ws+"]",trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*"),trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$"),hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!zeroWidth.trim());defineProperties(StringPrototype,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);var string_substr=StringPrototype.substr,hasNegativeSubstrBug="".substr&&"b"!=="0b".substr(-1);defineProperties(StringPrototype,{substr:function(t,r){return string_substr.call(this,0>t&&(t=this.length+t)<0?0:t,r)}},hasNegativeSubstrBug);
//# sourceMappingURL=kurento-jsonrpc.map
},{}],34:[function(_dereq_,module,exports){
"use strict";module.exports=[_dereq_("./transport/websocket"),_dereq_("./transport/xhr-streaming"),_dereq_("./transport/xdr-streaming"),_dereq_("./transport/eventsource"),_dereq_("./transport/lib/iframe-wrap")(_dereq_("./transport/eventsource")),_dereq_("./transport/htmlfile"),_dereq_("./transport/lib/iframe-wrap")(_dereq_("./transport/htmlfile")),_dereq_("./transport/xhr-polling"),_dereq_("./transport/xdr-polling"),_dereq_("./transport/lib/iframe-wrap")(_dereq_("./transport/xhr-polling")),_dereq_("./transport/jsonp-polling")];
//# sourceMappingURL=kurento-jsonrpc.map
},{"./transport/eventsource":38,"./transport/htmlfile":39,"./transport/jsonp-polling":41,"./transport/lib/iframe-wrap":44,"./transport/websocket":56,"./transport/xdr-polling":57,"./transport/xdr-streaming":58,"./transport/xhr-polling":59,"./transport/xhr-streaming":60}],35:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function AbstractXHRObject(t,e,r,i){debug(t,e);var s=this;EventEmitter.call(this),setTimeout(function(){s._start(t,e,r,i)},0)}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),utils=_dereq_("../../utils/event"),urlUtils=_dereq_("../../utils/url"),XHR=global.XMLHttpRequest,debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:browser:xhr")),inherits(AbstractXHRObject,EventEmitter),AbstractXHRObject.prototype._start=function(t,e,r,i){var s=this;try{this.xhr=new XHR}catch(n){}if(!this.xhr)return debug("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();e=urlUtils.addQuery(e,"t="+ +new Date),this.unloadRef=utils.unloadAdd(function(){debug("unload cleanup"),s._cleanup(!0)});try{this.xhr.open(t,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){debug("xhr timeout"),s.emit("finish",0,""),s._cleanup(!1)})}catch(u){return debug("exception",u),this.emit("finish",0,""),void this._cleanup(!1)}if(i&&i.noCredentials||!AbstractXHRObject.supportsCORS||(debug("withCredentials"),this.xhr.withCredentials="true"),i&&i.headers)for(var a in i.headers)this.xhr.setRequestHeader(a,i.headers[a]);this.xhr.onreadystatechange=function(){if(s.xhr){var t,e,r=s.xhr;switch(debug("readyState",r.readyState),r.readyState){case 3:try{e=r.status,t=r.responseText}catch(i){}debug("status",e),1223===e&&(e=204),200===e&&t&&t.length>0&&(debug("chunk"),s.emit("chunk",e,t));break;case 4:e=r.status,debug("status",e),1223===e&&(e=204),(12005===e||12029===e)&&(e=0),debug("finish",e,r.responseText),s.emit("finish",e,r.responseText),s._cleanup(!1)}}};try{s.xhr.send(r)}catch(u){s.emit("finish",0,""),s._cleanup(!1)}},AbstractXHRObject.prototype._cleanup=function(t){if(debug("cleanup"),this.xhr){if(this.removeAllListeners(),utils.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),t)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},AbstractXHRObject.prototype.close=function(){debug("close"),this._cleanup(!0)},AbstractXHRObject.enabled=!!XHR;var axo=["Active"].concat("Object").join("X");!AbstractXHRObject.enabled&&axo in global&&(debug("overriding xmlhttprequest"),XHR=function(){try{return new global[axo]("Microsoft.XMLHTTP")}catch(t){return null}},AbstractXHRObject.enabled=!!new XHR);var cors=!1;try{cors="withCredentials"in new XHR}catch(ignored){}AbstractXHRObject.supportsCORS=cors,module.exports=AbstractXHRObject;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../../utils/event":64,"../../utils/url":70,"debug":10,"events":21,"g5I+bs":16,"inherits":13}],36:[function(_dereq_,module,exports){
(function (global){
module.exports=global.EventSource;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],37:[function(_dereq_,module,exports){
(function (global){
module.exports=global.WebSocket||global.MozWebSocket;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],38:[function(_dereq_,module,exports){
"use strict";function EventSourceTransport(e){if(!EventSourceTransport.enabled())throw new Error("Transport created when disabled");AjaxBasedTransport.call(this,e,"/eventsource",EventSourceReceiver,XHRCorsObject)}var inherits=_dereq_("inherits"),AjaxBasedTransport=_dereq_("./lib/ajax-based"),EventSourceReceiver=_dereq_("./receiver/eventsource"),XHRCorsObject=_dereq_("./sender/xhr-cors"),EventSourceDriver=_dereq_("eventsource");inherits(EventSourceTransport,AjaxBasedTransport),EventSourceTransport.enabled=function(){return!!EventSourceDriver},EventSourceTransport.transportName="eventsource",EventSourceTransport.roundTrips=2,module.exports=EventSourceTransport;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./lib/ajax-based":42,"./receiver/eventsource":47,"./sender/xhr-cors":53,"eventsource":36,"inherits":13}],39:[function(_dereq_,module,exports){
"use strict";function HtmlFileTransport(e){if(!HtmlfileReceiver.enabled)throw new Error("Transport created when disabled");AjaxBasedTransport.call(this,e,"/htmlfile",HtmlfileReceiver,XHRLocalObject)}var inherits=_dereq_("inherits"),HtmlfileReceiver=_dereq_("./receiver/htmlfile"),XHRLocalObject=_dereq_("./sender/xhr-local"),AjaxBasedTransport=_dereq_("./lib/ajax-based");inherits(HtmlFileTransport,AjaxBasedTransport),HtmlFileTransport.enabled=function(e){return HtmlfileReceiver.enabled&&e.sameOrigin},HtmlFileTransport.transportName="htmlfile",HtmlFileTransport.roundTrips=2,module.exports=HtmlFileTransport;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./lib/ajax-based":42,"./receiver/htmlfile":48,"./sender/xhr-local":55,"inherits":13}],40:[function(_dereq_,module,exports){
(function (process){
"use strict";function IframeTransport(e,t,r){if(!IframeTransport.enabled())throw new Error("Transport created when disabled");EventEmitter.call(this);var i=this;this.origin=urlUtils.getOrigin(r),this.baseUrl=r,this.transUrl=t,this.transport=e,this.windowId=random.string(8);var s=urlUtils.addPath(r,"/iframe.html")+"#"+this.windowId;debug(e,t,s),this.iframeObj=iframeUtils.createIframe(s,function(e){debug("err callback"),i.emit("close",1006,"Unable to load an iframe ("+e+")"),i.close()}),this.onmessageCallback=this._message.bind(this),eventUtils.attachEvent("message",this.onmessageCallback)}var inherits=_dereq_("inherits"),JSON3=_dereq_("json3"),EventEmitter=_dereq_("events").EventEmitter,version=_dereq_("../version"),urlUtils=_dereq_("../utils/url"),iframeUtils=_dereq_("../utils/iframe"),eventUtils=_dereq_("../utils/event"),random=_dereq_("../utils/random"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:transport:iframe")),inherits(IframeTransport,EventEmitter),IframeTransport.prototype.close=function(){if(debug("close"),this.removeAllListeners(),this.iframeObj){eventUtils.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},IframeTransport.prototype._message=function(e){if(debug("message",e.data),!urlUtils.isOriginEqual(e.origin,this.origin))return void debug("not same origin",e.origin,this.origin);var t;try{t=JSON3.parse(e.data)}catch(r){return void debug("bad json",e.data)}if(t.windowId!==this.windowId)return void debug("mismatched window id",t.windowId,this.windowId);switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON3.stringify([version,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var i;try{i=JSON3.parse(t.data)}catch(r){return void debug("bad json",t.data)}this.emit("close",i[0],i[1]),this.close()}},IframeTransport.prototype.postMessage=function(e,t){debug("postMessage",e,t),this.iframeObj.post(JSON3.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},IframeTransport.prototype.send=function(e){debug("send",e),this.postMessage("m",e)},IframeTransport.enabled=function(){return iframeUtils.iframeEnabled},IframeTransport.transportName="iframe",IframeTransport.roundTrips=2,module.exports=IframeTransport;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"../utils/event":64,"../utils/iframe":65,"../utils/random":68,"../utils/url":70,"../version":71,"debug":10,"events":21,"g5I+bs":16,"inherits":13,"json3":14}],41:[function(_dereq_,module,exports){
(function (global){
"use strict";function JsonPTransport(e){if(!JsonPTransport.enabled())throw new Error("Transport created when disabled");SenderReceiver.call(this,e,"/jsonp",jsonpSender,JsonpReceiver)}var inherits=_dereq_("inherits"),SenderReceiver=_dereq_("./lib/sender-receiver"),JsonpReceiver=_dereq_("./receiver/jsonp"),jsonpSender=_dereq_("./sender/jsonp");inherits(JsonPTransport,SenderReceiver),JsonPTransport.enabled=function(){return!!global.document},JsonPTransport.transportName="jsonp-polling",JsonPTransport.roundTrips=1,JsonPTransport.needBody=!0,module.exports=JsonPTransport;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./lib/sender-receiver":46,"./receiver/jsonp":49,"./sender/jsonp":51,"inherits":13}],42:[function(_dereq_,module,exports){
(function (process){
"use strict";function createAjaxSender(e){return function(r,n,t){debug("create ajax sender",r,n);var i={};"string"==typeof n&&(i.headers={"Content-type":"text/plain"});var s=urlUtils.addPath(r,"/xhr_send"),a=new e("POST",s,n,i);return a.once("finish",function(e){return debug("finish",e),a=null,200!==e&&204!==e?t(new Error("http status "+e)):void t()}),function(){debug("abort"),a.close(),a=null;var e=new Error("Aborted");e.code=1e3,t(e)}}}function AjaxBasedTransport(e,r,n,t){SenderReceiver.call(this,e,r,createAjaxSender(t),n,t)}var inherits=_dereq_("inherits"),urlUtils=_dereq_("../../utils/url"),SenderReceiver=_dereq_("./sender-receiver"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:ajax-based")),inherits(AjaxBasedTransport,SenderReceiver),module.exports=AjaxBasedTransport;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"../../utils/url":70,"./sender-receiver":46,"debug":10,"g5I+bs":16,"inherits":13}],43:[function(_dereq_,module,exports){
(function (process){
"use strict";function BufferedSender(e,t){debug(e),EventEmitter.call(this),this.sendBuffer=[],this.sender=t,this.url=e}var inherits=_dereq_("inherits"),EventEmitter=_dereq_("events").EventEmitter,debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:buffered-sender")),inherits(BufferedSender,EventEmitter),BufferedSender.prototype.send=function(e){debug("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},BufferedSender.prototype.sendScheduleWait=function(){debug("sendScheduleWait");var e,t=this;this.sendStop=function(){debug("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){debug("timeout"),t.sendStop=null,t.sendSchedule()},25)},BufferedSender.prototype.sendSchedule=function(){debug("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(debug("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e._cleanup()):e.sendScheduleWait()}),this.sendBuffer=[]}},BufferedSender.prototype._cleanup=function(){debug("_cleanup"),this.removeAllListeners()},BufferedSender.prototype.stop=function(){debug("stop"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},module.exports=BufferedSender;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"debug":10,"events":21,"g5I+bs":16,"inherits":13}],44:[function(_dereq_,module,exports){
(function (global){
"use strict";var inherits=_dereq_("inherits"),IframeTransport=_dereq_("../iframe"),objectUtils=_dereq_("../../utils/object");module.exports=function(r){function e(e,t){IframeTransport.call(this,r.transportName,e,t)}return inherits(e,IframeTransport),e.enabled=function(e,t){if(!global.document)return!1;var n=objectUtils.extend({},t);return n.sameOrigin=!0,r.enabled(n)&&IframeTransport.enabled()},e.transportName="iframe-"+r.transportName,e.needBody=!0,e.roundTrips=IframeTransport.roundTrips+r.roundTrips-1,e.facadeTransport=r,e};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../../utils/object":67,"../iframe":40,"inherits":13}],45:[function(_dereq_,module,exports){
(function (process){
"use strict";function Polling(e,i,t){debug(i),EventEmitter.call(this),this.Receiver=e,this.receiveUrl=i,this.AjaxObject=t,this._scheduleReceiver()}var inherits=_dereq_("inherits"),EventEmitter=_dereq_("events").EventEmitter,debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:polling")),inherits(Polling,EventEmitter),Polling.prototype._scheduleReceiver=function(){debug("_scheduleReceiver");var e=this,i=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);i.on("message",function(i){debug("message",i),e.emit("message",i)}),i.once("close",function(t,l){debug("close",t,l,e.pollIsClosing),e.poll=i=null,e.pollIsClosing||("network"===l?e._scheduleReceiver():(e.emit("close",t||1006,l),e.removeAllListeners()))})},Polling.prototype.abort=function(){debug("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},module.exports=Polling;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"debug":10,"events":21,"g5I+bs":16,"inherits":13}],46:[function(_dereq_,module,exports){
(function (process){
"use strict";function SenderReceiver(e,l,r,i,s){var o=urlUtils.addPath(e,l);debug(o);var n=this;BufferedSender.call(this,e,r),this.poll=new Polling(i,o,s),this.poll.on("message",function(e){debug("poll message",e),n.emit("message",e)}),this.poll.once("close",function(e,l){debug("poll close",e,l),n.poll=null,n.emit("close",e,l),n.close()})}var inherits=_dereq_("inherits"),urlUtils=_dereq_("../../utils/url"),BufferedSender=_dereq_("./buffered-sender"),Polling=_dereq_("./polling"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:sender-receiver")),inherits(SenderReceiver,BufferedSender),SenderReceiver.prototype.close=function(){debug("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null),this.stop()},module.exports=SenderReceiver;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"../../utils/url":70,"./buffered-sender":43,"./polling":45,"debug":10,"g5I+bs":16,"inherits":13}],47:[function(_dereq_,module,exports){
(function (process){
"use strict";function EventSourceReceiver(e){debug(e),EventEmitter.call(this);var t=this,r=this.es=new EventSourceDriver(e);r.onmessage=function(e){debug("message",e.data),t.emit("message",decodeURI(e.data))},r.onerror=function(e){debug("error",r.readyState,e);var n=2!==r.readyState?"network":"permanent";t._cleanup(),t._close(n)}}var inherits=_dereq_("inherits"),EventEmitter=_dereq_("events").EventEmitter,EventSourceDriver=_dereq_("eventsource"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:receiver:eventsource")),inherits(EventSourceReceiver,EventEmitter),EventSourceReceiver.prototype.abort=function(){debug("abort"),this._cleanup(),this._close("user")},EventSourceReceiver.prototype._cleanup=function(){debug("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},EventSourceReceiver.prototype._close=function(e){debug("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},module.exports=EventSourceReceiver;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"debug":10,"events":21,"eventsource":36,"g5I+bs":16,"inherits":13}],48:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function HtmlfileReceiver(e){debug(e),EventEmitter.call(this);var i=this;iframeUtils.polluteGlobalNamespace(),this.id="a"+random.string(6),e=urlUtils.addQuery(e,"c="+decodeURIComponent(iframeUtils.WPrefix+"."+this.id)),debug("using htmlfile",HtmlfileReceiver.htmlfileEnabled);var t=HtmlfileReceiver.htmlfileEnabled?iframeUtils.createHtmlfile:iframeUtils.createIframe;global[iframeUtils.WPrefix][this.id]={start:function(){debug("start"),i.iframeObj.loaded()},message:function(e){debug("message",e),i.emit("message",e)},stop:function(){debug("stop"),i._cleanup(),i._close("network")}},this.iframeObj=t(e,function(){debug("callback"),i._cleanup(),i._close("permanent")})}var inherits=_dereq_("inherits"),iframeUtils=_dereq_("../../utils/iframe"),urlUtils=_dereq_("../../utils/url"),EventEmitter=_dereq_("events").EventEmitter,random=_dereq_("../../utils/random"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:receiver:htmlfile")),inherits(HtmlfileReceiver,EventEmitter),HtmlfileReceiver.prototype.abort=function(){debug("abort"),this._cleanup(),this._close("user")},HtmlfileReceiver.prototype._cleanup=function(){debug("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[iframeUtils.WPrefix][this.id]},HtmlfileReceiver.prototype._close=function(e){debug("_close",e),this.emit("close",null,e),this.removeAllListeners()},HtmlfileReceiver.htmlfileEnabled=!1;var axo=["Active"].concat("Object").join("X");if(axo in global)try{HtmlfileReceiver.htmlfileEnabled=!!new global[axo]("htmlfile")}catch(x){}HtmlfileReceiver.enabled=HtmlfileReceiver.htmlfileEnabled||iframeUtils.iframeEnabled,module.exports=HtmlfileReceiver;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../../utils/iframe":65,"../../utils/random":68,"../../utils/url":70,"debug":10,"events":21,"g5I+bs":16,"inherits":13}],49:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function JsonpReceiver(e){debug(e);var t=this;EventEmitter.call(this),utils.polluteGlobalNamespace(),this.id="a"+random.string(6);var r=urlUtils.addQuery(e,"c="+encodeURIComponent(utils.WPrefix+"."+this.id));global[utils.WPrefix][this.id]=this._callback.bind(this),this._createScript(r),this.timeoutId=setTimeout(function(){debug("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},JsonpReceiver.timeout)}var utils=_dereq_("../../utils/iframe"),random=_dereq_("../../utils/random"),browser=_dereq_("../../utils/browser"),urlUtils=_dereq_("../../utils/url"),inherits=_dereq_("inherits"),EventEmitter=_dereq_("events").EventEmitter,debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:receiver:jsonp")),inherits(JsonpReceiver,EventEmitter),JsonpReceiver.prototype.abort=function(){if(debug("abort"),global[utils.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},JsonpReceiver.timeout=35e3,JsonpReceiver.scriptErrorTimeout=1e3,JsonpReceiver.prototype._callback=function(e){debug("_callback",e),this._cleanup(),this.aborting||(e&&(debug("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},JsonpReceiver.prototype._abort=function(e){debug("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},JsonpReceiver.prototype._cleanup=function(){if(debug("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete global[utils.WPrefix][this.id]},JsonpReceiver.prototype._scriptError=function(){debug("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},JsonpReceiver.scriptErrorTimeout))},JsonpReceiver.prototype._createScript=function(e){debug("_createScript",e);var t,r=this,i=this.script=global.document.createElement("script");if(i.id="a"+random.string(8),i.src=e,i.type="text/javascript",i.charset="UTF-8",i.onerror=this._scriptError.bind(this),i.onload=function(){debug("onload"),r._abort(new Error("JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(){if(debug("onreadystatechange",i.readyState),/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){r.loadedOkay=!0;try{i.onclick()}catch(e){}}i&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof i.async&&global.document.attachEvent)if(browser.isOpera())t=this.script2=global.document.createElement("script"),t.text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=t.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(o){}i.async=!0}"undefined"!=typeof i.async&&(i.async=!0);var s=global.document.getElementsByTagName("head")[0];s.insertBefore(i,s.firstChild),t&&s.insertBefore(t,s.firstChild)},module.exports=JsonpReceiver;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../../utils/browser":62,"../../utils/iframe":65,"../../utils/random":68,"../../utils/url":70,"debug":10,"events":21,"g5I+bs":16,"inherits":13}],50:[function(_dereq_,module,exports){
(function (process){
"use strict";function XhrReceiver(e,i){debug(e),EventEmitter.call(this);var t=this;this.bufferPosition=0,this.xo=new i("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,i){debug("finish",e,i),t._chunkHandler(e,i),t.xo=null;var r=200===e?"network":"permanent";debug("close",r),t.emit("close",null,r),t._cleanup()})}var inherits=_dereq_("inherits"),EventEmitter=_dereq_("events").EventEmitter,debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:receiver:xhr")),inherits(XhrReceiver,EventEmitter),XhrReceiver.prototype._chunkHandler=function(e,i){if(debug("_chunkHandler",e),200===e&&i)for(var t=-1;;this.bufferPosition+=t+1){var r=i.slice(this.bufferPosition);if(t=r.indexOf("\n"),-1===t)break;var n=r.slice(0,t);n&&(debug("message",n),this.emit("message",n))}},XhrReceiver.prototype._cleanup=function(){debug("_cleanup"),this.removeAllListeners()},XhrReceiver.prototype.abort=function(){debug("abort"),this.xo&&(this.xo.close(),debug("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},module.exports=XhrReceiver;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"debug":10,"events":21,"g5I+bs":16,"inherits":13}],51:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function createIframe(e){debug("createIframe",e);try{return global.document.createElement('<iframe name="'+e+'">')}catch(r){var a=global.document.createElement("iframe");return a.name=e,a}}function createForm(){debug("createForm"),form=global.document.createElement("form"),form.style.display="none",form.style.position="absolute",form.method="POST",form.enctype="application/x-www-form-urlencoded",form.acceptCharset="UTF-8",area=global.document.createElement("textarea"),area.name="d",form.appendChild(area),global.document.body.appendChild(form)}var random=_dereq_("../../utils/random"),urlUtils=_dereq_("../../utils/url"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:sender:jsonp"));var form,area;module.exports=function(e,r,a){debug(e,r),form||createForm();var o="a"+random.string(8);form.target=o,form.action=urlUtils.addQuery(urlUtils.addPath(e,"/jsonp_send"),"i="+o);var t=createIframe(o);t.id=o,t.style.display="none",form.appendChild(t);try{area.value=r}catch(n){}form.submit();var d=function(e){debug("completed",o,e),t.onerror&&(t.onreadystatechange=t.onerror=t.onload=null,setTimeout(function(){debug("cleaning up",o),t.parentNode.removeChild(t),t=null},500),area.value="",a(e))};return t.onerror=function(){debug("onerror",o),d()},t.onload=function(){debug("onload",o),d()},t.onreadystatechange=function(e){debug("onreadystatechange",o,t.readyState,e),"complete"===t.readyState&&d()},function(){debug("aborted",o),d(new Error("Aborted"))}};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../../utils/random":68,"../../utils/url":70,"debug":10,"g5I+bs":16}],52:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function XDRObject(e,t,r){debug(e,t);var i=this;EventEmitter.call(this),setTimeout(function(){i._start(e,t,r)},0)}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),eventUtils=_dereq_("../../utils/event"),browser=_dereq_("../../utils/browser"),urlUtils=_dereq_("../../utils/url"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:sender:xdr")),inherits(XDRObject,EventEmitter),XDRObject.prototype._start=function(e,t,r){debug("_start");var i=this,n=new global.XDomainRequest;t=urlUtils.addQuery(t,"t="+ +new Date),n.onerror=function(){debug("onerror"),i._error()},n.ontimeout=function(){debug("ontimeout"),i._error()},n.onprogress=function(){debug("progress",n.responseText),i.emit("chunk",200,n.responseText)},n.onload=function(){debug("load"),i.emit("finish",200,n.responseText),i._cleanup(!1)},this.xdr=n,this.unloadRef=eventUtils.unloadAdd(function(){i._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(o){this._error()}},XDRObject.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},XDRObject.prototype._cleanup=function(e){if(debug("cleanup",e),this.xdr){if(this.removeAllListeners(),eventUtils.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},XDRObject.prototype.close=function(){debug("close"),this._cleanup(!0)},XDRObject.enabled=!(!global.XDomainRequest||!browser.hasDomain()),module.exports=XDRObject;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../../utils/browser":62,"../../utils/event":64,"../../utils/url":70,"debug":10,"events":21,"g5I+bs":16,"inherits":13}],53:[function(_dereq_,module,exports){
"use strict";function XHRCorsObject(r,e,i,s){XhrDriver.call(this,r,e,i,s)}var inherits=_dereq_("inherits"),XhrDriver=_dereq_("../driver/xhr");inherits(XHRCorsObject,XhrDriver),XHRCorsObject.enabled=XhrDriver.enabled&&XhrDriver.supportsCORS,module.exports=XHRCorsObject;
//# sourceMappingURL=kurento-jsonrpc.map
},{"../driver/xhr":35,"inherits":13}],54:[function(_dereq_,module,exports){
"use strict";function XHRFake(){var t=this;EventEmitter.call(this),this.to=setTimeout(function(){t.emit("finish",200,"{}")},XHRFake.timeout)}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits");inherits(XHRFake,EventEmitter),XHRFake.prototype.close=function(){clearTimeout(this.to)},XHRFake.timeout=2e3,module.exports=XHRFake;
//# sourceMappingURL=kurento-jsonrpc.map
},{"events":21,"inherits":13}],55:[function(_dereq_,module,exports){
"use strict";function XHRLocalObject(r,e,i){XhrDriver.call(this,r,e,i,{noCredentials:!0})}var inherits=_dereq_("inherits"),XhrDriver=_dereq_("../driver/xhr");inherits(XHRLocalObject,XhrDriver),XHRLocalObject.enabled=XhrDriver.enabled,module.exports=XHRLocalObject;
//# sourceMappingURL=kurento-jsonrpc.map
},{"../driver/xhr":35,"inherits":13}],56:[function(_dereq_,module,exports){
(function (process){
"use strict";function WebSocketTransport(e){if(!WebSocketTransport.enabled())throw new Error("Transport created when disabled");EventEmitter.call(this),debug("constructor",e);var t=this,s=urlUtils.addPath(e,"/websocket");s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),this.url=s,this.ws=new WebsocketDriver(this.url),this.ws.onmessage=function(e){debug("message event",e.data),t.emit("message",e.data)},this.unloadRef=utils.unloadAdd(function(){debug("unload"),t.ws.close()}),this.ws.onclose=function(e){debug("close event",e.code,e.reason),t.emit("close",e.code,e.reason),t._cleanup()},this.ws.onerror=function(e){debug("error event",e),t.emit("close",1006,"WebSocket connection broken"),t._cleanup()}}var utils=_dereq_("../utils/event"),urlUtils=_dereq_("../utils/url"),inherits=_dereq_("inherits"),EventEmitter=_dereq_("events").EventEmitter,WebsocketDriver=_dereq_("./driver/websocket"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:websocket")),inherits(WebSocketTransport,EventEmitter),WebSocketTransport.prototype.send=function(e){var t="["+e+"]";debug("send",t),this.ws.send(t)},WebSocketTransport.prototype.close=function(){debug("close"),this.ws&&this.ws.close(),this._cleanup()},WebSocketTransport.prototype._cleanup=function(){debug("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),utils.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},WebSocketTransport.enabled=function(){return debug("enabled"),!!WebsocketDriver},WebSocketTransport.transportName="websocket",WebSocketTransport.roundTrips=2,module.exports=WebSocketTransport;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"../utils/event":64,"../utils/url":70,"./driver/websocket":37,"debug":10,"events":21,"g5I+bs":16,"inherits":13}],57:[function(_dereq_,module,exports){
"use strict";function XdrPollingTransport(r){if(!XDRObject.enabled)throw new Error("Transport created when disabled");AjaxBasedTransport.call(this,r,"/xhr",XhrReceiver,XDRObject)}var inherits=_dereq_("inherits"),AjaxBasedTransport=_dereq_("./lib/ajax-based"),XdrStreamingTransport=_dereq_("./xdr-streaming"),XhrReceiver=_dereq_("./receiver/xhr"),XDRObject=_dereq_("./sender/xdr");inherits(XdrPollingTransport,AjaxBasedTransport),XdrPollingTransport.enabled=XdrStreamingTransport.enabled,XdrPollingTransport.transportName="xdr-polling",XdrPollingTransport.roundTrips=2,module.exports=XdrPollingTransport;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./lib/ajax-based":42,"./receiver/xhr":50,"./sender/xdr":52,"./xdr-streaming":58,"inherits":13}],58:[function(_dereq_,module,exports){
"use strict";function XdrStreamingTransport(r){if(!XDRObject.enabled)throw new Error("Transport created when disabled");AjaxBasedTransport.call(this,r,"/xhr_streaming",XhrReceiver,XDRObject)}var inherits=_dereq_("inherits"),AjaxBasedTransport=_dereq_("./lib/ajax-based"),XhrReceiver=_dereq_("./receiver/xhr"),XDRObject=_dereq_("./sender/xdr");inherits(XdrStreamingTransport,AjaxBasedTransport),XdrStreamingTransport.enabled=function(r){return r.cookie_needed||r.nullOrigin?!1:XDRObject.enabled&&r.sameScheme},XdrStreamingTransport.transportName="xdr-streaming",XdrStreamingTransport.roundTrips=2,module.exports=XdrStreamingTransport;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./lib/ajax-based":42,"./receiver/xhr":50,"./sender/xdr":52,"inherits":13}],59:[function(_dereq_,module,exports){
"use strict";function XhrPollingTransport(r){if(!XHRLocalObject.enabled&&!XHRCorsObject.enabled)throw new Error("Transport created when disabled");AjaxBasedTransport.call(this,r,"/xhr",XhrReceiver,XHRCorsObject)}var inherits=_dereq_("inherits"),AjaxBasedTransport=_dereq_("./lib/ajax-based"),XhrReceiver=_dereq_("./receiver/xhr"),XHRCorsObject=_dereq_("./sender/xhr-cors"),XHRLocalObject=_dereq_("./sender/xhr-local");inherits(XhrPollingTransport,AjaxBasedTransport),XhrPollingTransport.enabled=function(r){return r.nullOrigin?!1:XHRLocalObject.enabled&&r.sameOrigin?!0:XHRCorsObject.enabled},XhrPollingTransport.transportName="xhr-polling",XhrPollingTransport.roundTrips=2,module.exports=XhrPollingTransport;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./lib/ajax-based":42,"./receiver/xhr":50,"./sender/xhr-cors":53,"./sender/xhr-local":55,"inherits":13}],60:[function(_dereq_,module,exports){
(function (global){
"use strict";function XhrStreamingTransport(r){if(!XHRLocalObject.enabled&&!XHRCorsObject.enabled)throw new Error("Transport created when disabled");AjaxBasedTransport.call(this,r,"/xhr_streaming",XhrReceiver,XHRCorsObject)}var inherits=_dereq_("inherits"),AjaxBasedTransport=_dereq_("./lib/ajax-based"),XhrReceiver=_dereq_("./receiver/xhr"),XHRCorsObject=_dereq_("./sender/xhr-cors"),XHRLocalObject=_dereq_("./sender/xhr-local"),browser=_dereq_("../utils/browser");inherits(XhrStreamingTransport,AjaxBasedTransport),XhrStreamingTransport.enabled=function(r){return r.nullOrigin?!1:browser.isOpera()?!1:XHRCorsObject.enabled},XhrStreamingTransport.transportName="xhr-streaming",XhrStreamingTransport.roundTrips=2,XhrStreamingTransport.needBody=!!global.document,module.exports=XhrStreamingTransport;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"../utils/browser":62,"./lib/ajax-based":42,"./receiver/xhr":50,"./sender/xhr-cors":53,"./sender/xhr-local":55,"inherits":13}],61:[function(_dereq_,module,exports){
(function (global){
"use strict";global.crypto&&global.crypto.getRandomValues?module.exports.randomBytes=function(r){var o=new Uint8Array(r);return global.crypto.getRandomValues(o),o}:module.exports.randomBytes=function(r){for(var o=new Array(r),t=0;r>t;t++)o[t]=Math.floor(256*Math.random());return o};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],62:[function(_dereq_,module,exports){
(function (global){
"use strict";module.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch(r){return!1}}};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],63:[function(_dereq_,module,exports){
"use strict";var JSON3=_dereq_("json3"),extraEscapable=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,extraLookup,unrollLookup=function(u){var f,a={},e=[];for(f=0;65536>f;f++)e.push(String.fromCharCode(f));return u.lastIndex=0,e.join("").replace(u,function(u){return a[u]="\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4),""}),u.lastIndex=0,a};module.exports={quote:function(u){var f=JSON3.stringify(u);return extraEscapable.lastIndex=0,extraEscapable.test(f)?(extraLookup||(extraLookup=unrollLookup(extraEscapable)),f.replace(extraEscapable,function(u){return extraLookup[u]})):f}};
//# sourceMappingURL=kurento-jsonrpc.map
},{"json3":14}],64:[function(_dereq_,module,exports){
(function (global){
"use strict";var random=_dereq_("./random"),onUnload={},afterUnload=!1,isChromePackagedApp=global.chrome&&global.chrome.app&&global.chrome.app.runtime;module.exports={attachEvent:function(e,n){"undefined"!=typeof global.addEventListener?global.addEventListener(e,n,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+e,n),global.attachEvent("on"+e,n))},detachEvent:function(e,n){"undefined"!=typeof global.addEventListener?global.removeEventListener(e,n,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+e,n),global.detachEvent("on"+e,n))},unloadAdd:function(e){if(isChromePackagedApp)return null;var n=random.string(8);return onUnload[n]=e,afterUnload&&setTimeout(this.triggerUnloadCallbacks,0),n},unloadDel:function(e){e in onUnload&&delete onUnload[e]},triggerUnloadCallbacks:function(){for(var e in onUnload)onUnload[e](),delete onUnload[e]}};var unloadTriggered=function(){afterUnload||(afterUnload=!0,module.exports.triggerUnloadCallbacks())};isChromePackagedApp||module.exports.attachEvent("unload",unloadTriggered);
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./random":68}],65:[function(_dereq_,module,exports){
(function (process,global){
"use strict";var eventUtils=_dereq_("./event"),JSON3=_dereq_("json3"),browser=_dereq_("./browser"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:utils:iframe")),module.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){module.exports.WPrefix in global||(global[module.exports.WPrefix]={})},postMessage:function(e,o){global.parent!==global?global.parent.postMessage(JSON3.stringify({windowId:module.exports.currentWindowId,type:e,data:o||""}),"*"):debug("Cannot postMessage, no parent window.",e,o)},createIframe:function(e,o){var t,n,r=global.document.createElement("iframe"),l=function(){debug("unattach"),clearTimeout(t);try{r.onload=null}catch(e){}r.onerror=null},i=function(){debug("cleanup"),r&&(l(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),eventUtils.unloadDel(n))},u=function(e){debug("onerror",e),r&&(i(),o(e))},a=function(e,o){debug("post",e,o);try{setTimeout(function(){r&&r.contentWindow&&r.contentWindow.postMessage(e,o)},0)}catch(t){}};return r.src=e,r.style.display="none",r.style.position="absolute",r.onerror=function(){u("onerror")},r.onload=function(){debug("onload"),clearTimeout(t),t=setTimeout(function(){u("onload timeout")},2e3)},global.document.body.appendChild(r),t=setTimeout(function(){u("timeout")},15e3),n=eventUtils.unloadAdd(i),{post:a,cleanup:i,loaded:l}},createHtmlfile:function(e,o){var t,n,r,l=["Active"].concat("Object").join("X"),i=new global[l]("htmlfile"),u=function(){clearTimeout(t),r.onerror=null},a=function(){i&&(u(),eventUtils.unloadDel(n),r.parentNode.removeChild(r),r=i=null,CollectGarbage())},d=function(e){debug("onerror",e),i&&(a(),o(e))},c=function(e,o){try{setTimeout(function(){r&&r.contentWindow&&r.contentWindow.postMessage(e,o)},0)}catch(t){}};i.open(),i.write('<html><script>document.domain="'+global.document.domain+'";</script></html>'),i.close(),i.parentWindow[module.exports.WPrefix]=global[module.exports.WPrefix];var s=i.createElement("div");return i.body.appendChild(s),r=i.createElement("iframe"),s.appendChild(r),r.src=e,r.onerror=function(){d("onerror")},t=setTimeout(function(){d("timeout")},15e3),n=eventUtils.unloadAdd(a),{post:c,cleanup:a,loaded:u}}},module.exports.iframeEnabled=!1,global.document&&(module.exports.iframeEnabled=("function"==typeof global.postMessage||"object"==typeof global.postMessage)&&!browser.isKonqueror());
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./browser":62,"./event":64,"debug":10,"g5I+bs":16,"json3":14}],66:[function(_dereq_,module,exports){
(function (global){
"use strict";var logObject={};["log","debug","warn"].forEach(function(o){var l=global.console&&global.console[o]&&global.console[o].apply;logObject[o]=l?function(){return global.console[o].apply(global.console,arguments)}:"log"===o?function(){}:logObject.log}),module.exports=logObject;
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],67:[function(_dereq_,module,exports){
"use strict";module.exports={isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){if(!this.isObject(t))return t;for(var e,r,n=1,o=arguments.length;o>n;n++){e=arguments[n];for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}};
//# sourceMappingURL=kurento-jsonrpc.map
},{}],68:[function(_dereq_,module,exports){
"use strict";var crypto=_dereq_("crypto"),_randomStringChars="abcdefghijklmnopqrstuvwxyz012345";module.exports={string:function(r){for(var n=_randomStringChars.length,t=crypto.randomBytes(r),o=[],e=0;r>e;e++)o.push(_randomStringChars.substr(t[e]%n,1));return o.join("")},number:function(r){return Math.floor(Math.random()*r)},numberString:function(r){var n=(""+(r-1)).length,t=new Array(n+1).join("0");return(t+this.number(r)).slice(-n)}};
//# sourceMappingURL=kurento-jsonrpc.map
},{"crypto":61}],69:[function(_dereq_,module,exports){
(function (process){
"use strict";var debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:utils:transport")),module.exports=function(e){return{filterToEnabled:function(t,r){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){return e?"websocket"===e.transportName&&r.websocket===!1?void debug("disabled from server","websocket"):t.length&&-1===t.indexOf(e.transportName)?void debug("not in whitelist",e.transportName):void(e.enabled(r)?(debug("enabled",e.transportName),n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)):debug("disabled",e.transportName)):void 0}),n}}};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"debug":10,"g5I+bs":16}],70:[function(_dereq_,module,exports){
(function (process){
"use strict";var URL=_dereq_("url-parse"),debug=function(){};"production"!==process.env.NODE_ENV&&(debug=_dereq_("debug")("sockjs-client:utils:url")),module.exports={getOrigin:function(r){if(!r)return null;var t=new URL(r);if("file:"===t.protocol)return null;var e=t.port;return e||(e="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+e},isOriginEqual:function(r,t){var e=this.getOrigin(r)===this.getOrigin(t);return debug("same",r,t,e),e},isSchemeEqual:function(r,t){return r.split(":")[0]===t.split(":")[0]},addPath:function(r,t){var e=r.split("?");return e[0]+t+(e[1]?"?"+e[1]:"")},addQuery:function(r,t){return r+(-1===r.indexOf("?")?"?"+t:"&"+t)}};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,_dereq_("g5I+bs"))
},{"debug":10,"g5I+bs":16,"url-parse":72}],71:[function(_dereq_,module,exports){
module.exports="1.0.3";
//# sourceMappingURL=kurento-jsonrpc.map
},{}],72:[function(_dereq_,module,exports){
"use strict";function extractProtocol(t){var o=protocolre.exec(t);return{protocol:o[1]?o[1].toLowerCase():"",slashes:!!o[2],rest:o[3]?o[3]:""}}function URL(t,o,e){if(!(this instanceof URL))return new URL(t,o,e);var r,s,n,a,i=relativere.test(t),l=typeof o,p=this,h=0;"object"!==l&&"string"!==l&&(e=o,o=null),e&&"function"!=typeof e&&(e=qs.parse),o=lolcation(o);var c=extractProtocol(t);for(p.protocol=c.protocol||o.protocol||"",p.slashes=c.slashes||o.slashes,t=c.rest;h<instructions.length;h++)s=instructions[h],r=s[0],a=s[1],r!==r?p[a]=t:"string"==typeof r?~(n=t.indexOf(r))&&("number"==typeof s[2]?(p[a]=t.slice(0,n),t=t.slice(n+s[2])):(p[a]=t.slice(n),t=t.slice(0,n))):(n=r.exec(t))&&(p[a]=n[1],t=t.slice(0,t.length-n[0].length)),p[a]=p[a]||(s[3]||"port"===a&&i?o[a]||"":""),s[4]&&(p[a]=p[a].toLowerCase());e&&(p.query=e(p.query)),required(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(s=p.auth.split(":"),p.username=s[0]||"",p.password=s[1]||""),p.href=p.toString()}var required=_dereq_("requires-port"),lolcation=_dereq_("./lolcation"),qs=_dereq_("querystringify"),relativere=/^\/(?!\/)/,protocolre=/^([a-z0-9.+-]+:)?(\/\/)?(.*)$/i,instructions=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];URL.prototype.set=function(t,o,e){var r=this;return"query"===t?("string"==typeof o&&o.length&&(o=(e||qs.parse)(o)),r[t]=o):"port"===t?(r[t]=o,required(o,r.protocol)?o&&(r.host=r.hostname+":"+o):(r.host=r.hostname,r[t]="")):"hostname"===t?(r[t]=o,r.port&&(o+=":"+r.port),r.host=o):"host"===t?(r[t]=o,/\:\d+/.test(o)&&(o=o.split(":"),r.hostname=o[0],r.port=o[1])):"protocol"===t?(r.protocol=o,r.slashes=!e):r[t]=o,r.href=r.toString(),r},URL.prototype.toString=function(t){t&&"function"==typeof t||(t=qs.stringify);var o,e=this,r=e.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var s=r+(e.slashes?"//":"");return e.username&&(s+=e.username,e.password&&(s+=":"+e.password),s+="@"),s+=e.hostname,e.port&&(s+=":"+e.port),s+=e.pathname,o="object"==typeof e.query?t(e.query):e.query,o&&(s+="?"!==o.charAt(0)?"?"+o:o),e.hash&&(s+=e.hash),s},URL.qs=qs,URL.location=lolcation,module.exports=URL;
//# sourceMappingURL=kurento-jsonrpc.map
},{"./lolcation":73,"querystringify":17,"requires-port":18}],73:[function(_dereq_,module,exports){
(function (global){
"use strict";var ignore={hash:1,query:1},URL;module.exports=function(e){e=e||global.location||{},URL=URL||_dereq_("./");var o,r={},n=typeof e;if("blob:"===e.protocol)r=new URL(unescape(e.pathname),{});else if("string"===n){r=new URL(e,{});for(o in ignore)delete r[o]}else if("object"===n)for(o in e)o in ignore||(r[o]=e[o]);return r};
//# sourceMappingURL=kurento-jsonrpc.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./":72}],74:[function(_dereq_,module,exports){
function ws(e,o,t){var b;return b=o?new WebSocket(e,o):new WebSocket(e)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype);
//# sourceMappingURL=kurento-jsonrpc.map
},{}]},{},[6])

(6)
});

//# sourceMappingURL=kurento-jsonrpc.map